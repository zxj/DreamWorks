---
layout: default
title: test
---

#浅谈源代码管理

`SCM`(Source Code Management)源代码管理，也有人把类似的事情叫做`VCS`(Version Control System)版本控制系统。

##源代码管理的场景描述
下面通过一个场景故事给大家源代码管理过程中的细节。

**背景**：新员工小菜的第一个开发任务

**场景**：办公室

**人物**：小菜、老鸟、攀哥

*老鸟*：走到小菜跟前说：小菜，昨天给你讲那个需求理解了么？

*小菜*：理解了。

*老鸟*：嗯，好，我现在给你讲一下我们实际工作中的代码管理方式，然后你就可以开工了。

*小菜*：嗯，太好了，我正发愁无从下手呢！

*老鸟*：我们的代码管理工具用的是`TFS`内置的代码管理功能，昨天已经给你开通了访问我们`repository`的权限，来我给你演示一遍怎么操作，首先你需要在本地选择一个位置作为你的开发环境，然后把我们的代码从代码服务器`clone`一份到本地，然后就可以开发了。

*小菜*：嗯，我知道了。

*老鸟*：你之前接触过代码管理工具么？

*小菜*：嗯，实习的时候用过`SVN`，`TFS`在学校的时候也了解过，基本的代码管理操作没问题。

*老鸟*：嗯，你试着自己做，有问题随时问我吧。

*小菜*：我现在就有一个问题，我看我们的开发环境中有一个`trunk`目录和`branch`目录，而这两个目录中的内容看着差不多，他们有什么区别呢？

*老鸟*：是这样的，我们的开发产品迭代较快，在同一个时间段内可能有多个人同时跟进多个需求，为了保证开放过程中代码安全和避免冲突，我们通过分支的方式来管理我们的代码。我们规定`trunk`为主干，该主干中的代码要尽可能保持是稳定、测试通过的，一旦代码合并到主干，则意味着逻辑功能都已经测试通过，但有可能存在由于合并过程中解决冲突而导致的新bug，我们发布到生产环境时也是从主干拿代码发布的。`branch`是从`trunk`中`fork`出来的一个分支，我们通常在此分支中开发和测试，当我们的逻辑功能测试完成后，需要把相应的代码`merge`到主干。

*小菜*：额！！好复杂啊，什么主干、分支的，有点晕！

*老鸟*：虽然听起来有些复杂，但实际操作起来会感觉简单许多，尤其在开发过程中你真正理解分支的重要性之后，看吧，不着急，在以后的工作中慢慢就熟悉了。

*小菜*：嗯，好，谢谢老鸟。

根据昨天老鸟的描述，小菜找到了对应需要修改的代码文件，又执行了一次`get latest version`操作从代码仓库获取了最新代码，然后小菜执行了`checkout`操作，使本地代码处于可编辑状态。小菜在心里再次思考了一下具体的实现方式，想了一下，然后发出一声冷笑，哼...这么简单，看我的，然后噼里啪啦的一阵狂敲，搞定！然后在本地做了一个测试发现没有问题，就把代码`checkin`了。按照老鸟的要求，小菜发了一封邮件给老鸟进行`codereview`。

*老鸟*：
看了一下小菜的代码，提出了一些修改意见，在`review`通过后，告诉小菜后天就可以提测了。

*小菜*：嗯，好的，谢谢老鸟。

*三天后*
